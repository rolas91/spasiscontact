(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"3d1d":function(e,t,n){"use strict";var a=n("7e4a"),o=n.n(a);o.a},"7e4a":function(e,t,n){},df96:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{},[n("div",{staticClass:"q-pa-md"},[n("q-card",[n("q-card-section",{staticClass:"bg-blue-background text-white q-gutter-sm"},[n("h5",{staticClass:"page-title"},[e._v("\n          "+e._s(e.nuevo?"Nuevo test de personalidad":"Editar test de personalidad")+"\n        ")])]),n("q-separator"),n("q-form",{on:{submit:e.onSubmit}},[n("q-card-section",[n("div",{staticClass:"row q-col-gutter-md"},[n("div",{staticClass:"col-12 col-md-4"},[n("q-select",{attrs:{label:"Seleccione el curso",options:e.cursos,"option-value":"id","option-label":"nombre","emit-value":"","map-options":""},scopedSlots:e._u([{key:"no-option",fn:function(){return[n("q-item",[n("q-item-section",{staticClass:"text-grey"},[e._v("\n                      No hay resultados disponibles\n                    ")])],1)]},proxy:!0}]),model:{value:e.holland_test.nombre,callback:function(t){e.$set(e.holland_test,"nombre",t)},expression:"holland_test.nombre"}})],1),n("div",{staticClass:"col-12 col-md-4"},[n("q-input",{attrs:{label:"Fecha Inicio","lazy-rules":"",rules:[function(t){return t&&e.isValidDate(t)&&/\d{1,2}\/\d{1,2}\/\d{4}/.test(t)||"Ingrese un Fecha Inicio v치lido"}]},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{ref:"qDateProxyFechaInicio",attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"DD/MM/YYYY","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Ingrese un FechaInicio v치lido"}]},on:{input:function(){return e.$refs.qDateProxyFechaInicio.hide()}},model:{value:e.holland_test.fecha_inicio,callback:function(t){e.$set(e.holland_test,"fecha_inicio",t)},expression:"holland_test.fecha_inicio"}})],1)],1)]},proxy:!0}]),model:{value:e.holland_test.fecha_inicio,callback:function(t){e.$set(e.holland_test,"fecha_inicio",t)},expression:"holland_test.fecha_inicio"}})],1),n("div",{staticClass:"col-12 col-md-4"},[n("q-input",{attrs:{label:"Fecha Fin","lazy-rules":"",rules:[function(t){return t&&e.isValidDate(t)&&/\d{1,2}\/\d{1,2}\/\d{4}/.test(t)||"Ingrese un Fecha Fin v치lido"}]},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{ref:"qDateProxyFechaFin",attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"DD/MM/YYYY","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Ingrese un FechaFin v치lido"}]},on:{input:function(){return e.$refs.qDateProxyFechaFin.hide()}},model:{value:e.holland_test.fecha_fin,callback:function(t){e.$set(e.holland_test,"fecha_fin",t)},expression:"holland_test.fecha_fin"}})],1)],1)]},proxy:!0}]),model:{value:e.holland_test.fecha_fin,callback:function(t){e.$set(e.holland_test,"fecha_fin",t)},expression:"holland_test.fecha_fin"}})],1)]),n("q-card-actions",{staticClass:"row justify-between q-gutter-sm"},[n("q-btn",{attrs:{right:"",icon:"close"},on:{click:e.Cancelar}},[e._v("Cancelar")]),n("q-btn",{staticClass:"bg-primary text-white",attrs:{loading:e.loading,disable:e.loading,right:"",type:"submit",icon:"save"}},[e._v("\n              Guardar\n            ")])],1)],1)],1)],1)],1)])},o=[],r=(n("ac6a"),n("cadf"),n("06db"),n("456d"),n("a34a")),i=n.n(r),s=(n("7f7f"),n("96cf"),n("c973")),l=n.n(s),c=n("bc3a"),u=n.n(c),d=n("c1df"),h=n.n(d),f={data:function(){return{confirm:!1,nuevo:!0,selected:[],allCentros:!1,centros:[],cursos:[],loadingCentros:!1,visibleColumns:["id","nombre","id_centro","fecha_inicio","fecha_fin","usuario_creacion","id_curso"],holland_test:{id:0,nombre:"",fecha_inicio:null,fecha_fin:null,usuario_creacion:0},holland_tests:[],loading:!1,modalOpen:!1,loadingTable:!1,filtro:"",pagination:{sortBy:"id",descending:!0,page:1,rowsPerPage:10,rowsNumber:10},columns:[{name:"id",required:!0,label:"Id",align:"left",field:function(e){return e.id},format:function(e){return"".concat(e)},sortable:!0},{name:"nombre",required:!0,label:"Nombre",align:"left",field:function(e){return e.nombre},format:function(e){return"".concat(e)},sortable:!0},{name:"fecha_inicio",required:!0,label:"FechaInicio",align:"left",field:function(e){return e.fecha_inicio},format:function(e){return"".concat(e)},sortable:!0},{name:"fecha_fin",required:!0,label:"FechaFin",align:"left",field:function(e){return e.fecha_fin},format:function(e){return"".concat(e)},sortable:!0},{name:"usuario_creacion",required:!0,label:"UsuarioCreacion",align:"left",field:function(e){return e.usuario_creacion},format:function(e){return"".concat(e)},sortable:!0}]}},created:function(){var e=this;return l()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading=!0,e.$route.name,"holland-editar"!==e.$route.name){t.next=8;break}return e.nuevo=!1,t.next=6,e.CargarHollandTest();case 6:return t.next=8,e.CargarCentros();case 8:e.CargarCursos(),e.loading=!1;case 10:case"end":return t.stop()}}),t)})))()},methods:{CargarCursos:function(){var e=this;if(!this.$store.getters.online&&this.$q.platform.is.mobile){var t=getRepository("Centro");t.findOne(this.participante.id_centro,{relations:["cursos"]}).then((function(t){e.cursos=t.cursos,e.participante.id_curso=null})).catch((function(t){console.error("Error finding centro",t),e.cursos=null,e.participante.id_curso=null}))}else{var n="http://35.203.165.142/api/admin/catalogos/cursos",a={Authorization:"Bearer "+this.$store.state.token};u()({method:"get",url:n,headers:a}).then((function(t){e.cursos=t.data.cursos,e.participante.id_curso=null})).catch((function(t){401===t.response.status&&(e.removeCredentials(),e.$router.push({name:"login"}))}))}},selectAllCentros:function(){var e=this;this.centros.forEach((function(t,n,a){a[n].checked=e.allCentros}))},CargarCentros:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.loadingCentros=!0;var n="http://35.203.165.142/api/catalogos/holland-tests-centros",a={Authorization:"Bearer "+this.$store.state.token},o={q:t};u()({method:"get",url:n,params:o,headers:a}).then((function(t){e.centros=t.data.centros,e.centros.forEach((function(e,t,n){0===e.checked&&(n[t].checked=!1)})),e.loadingCentros=!1})).catch((function(t){e.loadingCentros=!1,401===t.response.status&&(e.removeCredentials(),e.$router.push({name:"login"}))}))},Cancelar:function(){this.$router.push({path:"/formularios/test-holland"})},editarHollandTest:function(){var e=this;return l()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.nuevo=!1,Object.keys(e.selected[0]).forEach((function(t){e.holland_test.hasOwnProperty(t)&&(e.holland_test[t]=e.selected[0][t])}));case 2:case"end":return t.stop()}}),t)})))()},removeCredentials:function(){this.$store.dispatch("removeCredentials")},isValidDate:function(e){return h()(e,"DD/MM/YYYY",!0).isValid()},CargarHollandTest:function(){var e=this;if(this.$route.params.idTest){var t="http://35.203.165.142/api"+"/formularios/test-holland/".concat(this.$route.params.idTest,"/edit"),n={Authorization:"Bearer "+this.$store.state.token};u()({method:"get",url:t,headers:n}).then((function(t){e.holland_test=t.data.holland_test})).catch((function(t){e.loading=!1,401===t.response.status&&(e.removeCredentials(),e.$router.push({name:"login"}))}))}},onSubmit:function(){var e=this;this.loading=!0;var t="post";if(""===this.holland_test.nombre)return this.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:"Selecciona un curso"}),void(this.loading=!1);var n="http://35.203.165.142/api/formularios/test-holland/store";this.nuevo||(n="http://35.203.165.142/api/formularios/test-holland/update/"+this.holland_test.id,t="put");var a={Authorization:"Bearer "+this.$store.state.token};u()({method:t,url:n,data:{holland_test:this.holland_test},headers:a}).then((function(t){if(!1===t.data.result)return e.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:t.data.message}),void(e.loading=!1);e.$q.notify({color:"green-4",textColor:"white",icon:"fas fa-check-circle",message:"HollandTest creado correctamente",position:"bottom",timeout:2e3}),e.$router.push({path:"/formularios/test-holland"})})).catch((function(t){e.loading=!1,e.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:t.response.data}),401===t.response.status&&(e.removeCredentials(),e.$router.push({name:"login"}))}))}}},p=f,m=(n("3d1d"),n("2877")),g=Object(m["a"])(p,a,o,!1,null,null,null);t["default"]=g.exports}}]);