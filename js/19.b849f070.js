(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"013f":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{staticStyle:{"background-image":"url('statics/imagenes-login/fondo.png')","background-size":"cover"},attrs:{view:"lHh Lpr lFf"}},[s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"row",staticStyle:{display:"flex","justify-content":"center","text-align":"center"}},[s("div",{staticClass:"col-12 col-md-4  offset-md-2"}),s("div",{staticClass:"col-12 col-md-3 offset-md-1"}),s("div",{staticClass:"col-12 col-md-2"},[t.$q.platform.is.mobile?t._e():s("q-btn",{staticStyle:{color:"white"},attrs:{flat:"",label:"Inicio",to:"/inicio"}})],1)])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-4 offset-md-4 col-sm-10 offset-sm-1 login-card"},[s("img",{staticClass:"imagen-logo",attrs:{src:"statics/imagenes-plantilla/logo1.png"}}),s("q-card",{attrs:{cointainer:""}}),s("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit}},[s("q-input",{attrs:{dark:"",type:"email",color:"white",label:"Correo","lazy-rules":"",rules:[function(e){return e&&e.length>0&&t.filter.test(t.email)||"Por favor ingresa una contraseña válida"}]},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("q-input",{attrs:{dark:"",color:"white",label:"Contraseña",type:t.isPwd?"password":"text","lazy-rules":"",rules:[function(t){return t&&t.length>=6||"Ingresa una contraseña válida, debe contener al menos 6 caracteres de longitud"}]},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("div",[s("div",{staticClass:"row q-mb-md text-right"},[s("div",{staticClass:"col-12 olvidaste-contrasenia"},[s("label",{staticClass:"text-white "},[s("q-btn",{attrs:{size:"sm",flat:"",to:"/resetear-contrasenia"}},[t._v("\n                    ¿Olvidaste tu contraseña?\n                  ")])],1)])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12",staticStyle:{display:"flex","justify-content":"center"}},[s("q-btn",{attrs:{loading:t.loading,label:"Entrar",type:"submit",color:"warning"}})],1)])])],1)],1)])]),s("div",[s("div",{staticClass:"col-12 col-md-4 offset-md-4 col-sm-10 offset-sm-1 flex flex-center"},[s("img",{staticClass:"logo-numu",attrs:{src:"statics/logos-numu-digital-factory.png"}})])])])},o=[],i=(s("7514"),s("3b2b"),s("bc3a")),r=s.n(i),l=s("0a93"),n={data:function(){return{email:null,loading:!1,password:null,isPwd:!0,filter:new RegExp(/^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/)}},created:function(){localStorage.getItem("ultimoemail")&&(this.email=localStorage.getItem("ultimoemail"))},methods:{setCredentials:function(t){this.$store.commit("setUser",t.user),this.$store.commit("setToken",t.token),this.$store.commit("setAccesos",t.accesos),this.$store.commit("setCentros",t.centros),localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),localStorage.setItem("accesos",JSON.stringify(t.accesos)),localStorage.setItem("centros",JSON.stringify(t.centros))},onSubmit:function(){var t=this;this.loading=!0;var e="http://35.203.165.142/api/login";if(this.$q.platform,!this.$store.getters.online&&this.$q.platform.is.mobile){var s=Object(l["i"])("User");s.find({email:this.email,password:this.password}).then((function(e){if(e&&e.length>0){var s=e[0],a=JSON.parse(s.data);t.setCredentials(a),t.$q.notify({color:"green-4",textColor:"white",icon:"fas fa-check-circle",message:"Bienvenido a Formularios",position:"top",timeout:2e3}),!t.$store.getters.online&&t.$q.platform.is.mobile&&t.$emit("start-sync"),t.loading=!1,t.$router.push({name:"dashboard"})}})).catch((function(e){t.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:"Usuario no encontrado"}),console.error({error:e}),t.loading=!1}))}else r.a.post(e,{email:this.email,password:this.password}).then((function(e){if(!e.data.result)return t.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:e.data.message}),void(t.loading=!1);if(!t.$store.getters.online&&t.$q.platform.is.mobile){var s=Object(l["i"])("User"),a={email:t.email,password:t.password,data:JSON.stringify(e.data)},o=t;s.findOne({email:t.email,password:t.password}).then((function(e){e.password=o.password,s.save(e),t.loading=!1})).catch((function(e){console.error("Error",e),s.save(a),t.loading=!1})),t.$emit("start-sync")}localStorage.setItem("ultimoemail",t.email),t.$q.notify({color:"green-4",textColor:"white",icon:"fas fa-check-circle",message:"Bienvenido a Formularios",position:"top",timeout:2e3}),t.setCredentials(e.data),t.loading=!1,t.$router.push({name:"dashboard"})})).catch((function(e){console.error("Error login in",{error:e}),t.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:e.response.data.message}),t.loading=!1}))}}},c=n,d=(s("da41"),s("2877")),m=Object(d["a"])(c,a,o,!1,null,null,null);e["default"]=m.exports},"14f2":function(t,e,s){},da41:function(t,e,s){"use strict";var a=s("14f2"),o=s.n(a);o.a}}]);