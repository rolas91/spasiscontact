(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[40],{"0a75":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("div",{staticClass:"q-pa-md q-gutter-md"},[a("div",{staticClass:"row q-gutter-md"},[e.selected.length>0?a("q-btn",{staticClass:"bg-primary text-white",on:{click:e.editarAcceso}},[e._v("Editar")]):e._e(),e.selected.length>0?a("q-btn",{staticClass:"bg-negative text-white",on:{click:e.pregunarEliminar}},[e._v("Eliminar")]):e._e(),a("q-btn",{staticClass:"bg-primary text-white",attrs:{icon:"autorenew"},on:{click:e.CargarAccesos}})],1),a("q-table",{attrs:{dense:e.$q.screen.lt.md,title:"Accesos",data:e.accesos,columns:e.columns,"row-key":"id",selection:"single",selected:e.selected,loading:e.loadingTable,pagination:e.pagination,filter:e.filtro},on:{"update:selected":function(t){e.selected=t},"update:pagination":function(t){e.pagination=t},request:e.onRequest},scopedSlots:e._u([{key:"top-right",fn:function(){return[a("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Buscar"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filtro,callback:function(t){e.filtro=t},expression:"filtro"}})]},proxy:!0}])})],1),a("q-dialog",{attrs:{persistent:""},model:{value:e.modalOpen,callback:function(t){e.modalOpen=t},expression:"modalOpen"}},[a("q-card",{staticStyle:{width:"1024px","max-width":"80vw"}},[a("q-card-section",{staticClass:"bg-primary text-white q-gutter-sm"},[a("h5",[e._v(e._s(e.nuevo?"Nuevo Acceso":"Editar Acceso"))])]),a("q-separator"),a("q-card-section",[a("q-form",{on:{submit:e.onSubmit}},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-12 col-md-4"},[a("q-input",{attrs:{color:"primary",label:"Nombre","lazy-rules":"",rules:[function(e){return e&&e.length>0&&e.length<100||"Ingrese un Nombre válido"}]},model:{value:e.acceso.nombre,callback:function(t){e.$set(e.acceso,"nombre",t)},expression:"acceso.nombre"}})],1),a("div",{staticClass:"col-12 col-md-4"},[a("q-input",{attrs:{color:"primary",label:"Descripcion"},model:{value:e.acceso.descripcion,callback:function(t){e.$set(e.acceso,"descripcion",t)},expression:"acceso.descripcion"}})],1),a("div",{staticClass:"col-12 col-md-4"},[a("q-input",{attrs:{color:"primary",label:"Icon"},model:{value:e.acceso.icon,callback:function(t){e.$set(e.acceso,"icon",t)},expression:"acceso.icon"}})],1)]),a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-12 col-md-4"},[a("q-input",{attrs:{color:"primary",label:"Path"},model:{value:e.acceso.path,callback:function(t){e.$set(e.acceso,"path",t)},expression:"acceso.path"}})],1)]),a("div",{staticClass:"col-12 col-md-4"},[a("q-input",{attrs:{"bg-color":"white",type:"number",label:"Orden","lazy-rules":"",rules:[function(e){return e>=0||"Ingrese los experiencia (Un número entre 0 y 100)"}]},model:{value:e.acceso.orden,callback:function(t){e.$set(e.acceso,"orden",t)},expression:"acceso.orden"}})],1),a("q-card-actions",{staticClass:"row justify-between q-gutter-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{right:"",icon:"close"}},[e._v("Cancelar")]),a("q-btn",{staticClass:"bg-primary text-white",attrs:{loading:e.loading,disable:e.loading,right:"",type:"submit",icon:"save"}},[e._v("Guardar")])],1)],1)],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-avatar",{attrs:{icon:"warning",color:"primary","text-color":"white"}}),a("span",{staticClass:"q-ml-sm"},[e._v("Esta seguro que desea eliminar el acceso seleccionado?")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"default"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-primary text-white",attrs:{flat:"",label:"Aceptar"},on:{click:e.eliminarAcceso}})],1)],1)],1)],1)},n=[],c=(a("ac6a"),a("cadf"),a("06db"),a("456d"),a("a34a")),s=a.n(c),i=(a("96cf"),a("c973")),r=a.n(i),l=a("bc3a"),d=a.n(l),u=a("c1df"),p=a.n(u),m={data:function(){return{confirm:!1,nuevo:!0,selected:[],visibleColumns:["id","nombre","descripcion","icon","path"],acceso:{id:0,nombre:"",descripcion:"",icon:"",path:"",orden:0},accesos:[],loading:!1,modalOpen:!1,loadingTable:!1,filtro:"",pagination:{sortBy:"orden",descending:!1,page:1,rowsPerPage:20,rowsNumber:10},columns:[{name:"id",required:!0,label:"Id",align:"left",field:function(e){return e.id},format:function(e){return"".concat(e)},sortable:!0},{name:"nombre",required:!0,label:"Nombre",align:"left",field:function(e){return e.nombre},format:function(e){return"".concat(e)},sortable:!0},{name:"descripcion",required:!0,label:"Descripcion",align:"left",field:function(e){return e.descripcion},format:function(e){return"".concat(e)},sortable:!0},{name:"icon",required:!0,label:"Icon",align:"left",field:function(e){return e.icon},format:function(e){return"".concat(e)},sortable:!0},{name:"path",required:!0,label:"Path",align:"left",field:function(e){return e.path},format:function(e){return"".concat(e)},sortable:!0},{name:"orden",required:!0,label:"Orden",align:"left",field:function(e){return e.orden},format:function(e){return"".concat(e)},sortable:!0},{name:"estado",required:!0,label:"estado",align:"left",field:function(e){return e.estado},format:function(e){return"".concat(e)},sortable:!0}]}},created:function(){var e=this;return r()(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.CargarAccesos();case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},methods:{RecargarAccesos:function(){var e=this,t="http://35.203.165.142/api/usuarios/accesos",a={Authorization:"Bearer "+this.$store.state.token};d()({method:"get",url:t,headers:a}).then((function(t){e.$store.commit("setAccesos",t.data.accesos),localStorage.setItem("accesos",JSON.stringify(t.data.accesos))})).catch((function(t){e.loadingAccesos=!1,401===t.response.status&&(e.removeCredentials(),e.$router.push({name:"login"}))}))},onRequest:function(e){this.CargarAccesos(e)},nuevoAcceso:function(){this.modalOpen=!0,this.nuevo=!0,this.LimpiarDatos()},pregunarEliminar:function(){this.confirm=!0},eliminarAcceso:function(){var e=this,t="http://35.203.165.142/api/admin/accesos/"+this.selected[0].id,a={Authorization:"Bearer "+this.$store.state.token};d()({method:"delete",url:t,headers:a}).then((function(t){e.$q.notify({color:"green-4",textColor:"white",icon:"fas fa-check-circle",message:"Acceso eliminado correctamente",position:"bottom",timeout:2e3}),e.modalOpen=!1,e.LimpiarDatos(),e.CargarAccesos(),e.selected=[]})).catch((function(t){e.loading=!1,e.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:t.response.data}),401===t.response.status&&(e.removeCredentials(),e.$router.push({name:"login"}))}))},editarAcceso:function(){var e=this;return r()(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.nuevo=!1,Object.keys(e.selected[0]).forEach((function(t){e.acceso.hasOwnProperty(t)&&(e.acceso[t]=e.selected[0][t])})),e.modalOpen=!0,t.next=5,e.CargarAccesos();case 5:case"end":return t.stop()}}),t)})))()},LimpiarDatos:function(){this.acceso.id=0,this.acceso.nombre="",this.acceso.descripcion="",this.acceso.icon="",this.acceso.path="",this.acceso.created_at=null,this.acceso.updated_at=null},removeCredentials:function(){this.$store.dispatch("removeCredentials")},filtrarAccesos:function(e,t,a){var o=this;t((function(){o.CargarAccesos(e)}))},isValidDate:function(e){return p()(e,"DD/MM/YYYY",!0).isValid()},onSubmit:function(){var e=this;this.loading=!0;var t="post",a="http://35.203.165.142/api/admin/accesos";this.nuevo||(a="http://35.203.165.142/api/admin/accesos/"+this.selected[0].id,t="put");var o={Authorization:"Bearer "+this.$store.state.token};d()({method:t,url:a,data:{acceso:this.acceso},headers:o}).then((function(t){e.$q.notify({color:"green-4",textColor:"white",icon:"fas fa-check-circle",message:"Acceso creado correctamente",position:"bottom",timeout:2e3}),e.modalOpen=!1,e.LimpiarDatos(),e.CargarAccesos(),e.selected=[]})).catch((function(t){e.loading=!1,e.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:t.response.data.message}),401===t.response.status&&(e.removeCredentials(),e.$router.push({name:"login"}))}))},CargarAccesos:function(e){var t=this,a=this.pagination.rowsPerPage,o=this.pagination.page;e&&e.pagination&&(a=e.pagination.rowsPerPage),this.loadingAccesos=!0;var n="http://35.203.165.142/api/admin/accesos",c={Authorization:"Bearer "+this.$store.state.token};d()({method:"get",url:n,params:{rowsPerPage:a,filtro:this.filtro,page:o},headers:c}).then((function(e){t.accesos=e.data.accesos.data,t.loadingAccesos=!1,t.accesos=e.data.accesos.data,t.loading=!1,t.loadingAccesos=!1,t.pagination.rowsNumber=e.data.accesos.total,t.pagination.rowsPerPage=a})).catch((function(e){t.loadingAccesos=!1,401===e.response.status&&(t.removeCredentials(),t.$router.push({name:"login"}))}))}}},f=m,h=a("2877"),g=Object(h["a"])(f,o,n,!1,null,"008e2c60",null);t["default"]=g.exports}}]);