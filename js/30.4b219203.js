(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{"09ab":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"q-pa-md"},[a("q-page-sticky",{staticStyle:{"z-index":"99",width:"100%",padding:"15px 50px","background-color":"#f5f5f5"},attrs:{position:"top-right"}},[a("q-tabs",{staticClass:"text-primary",staticStyle:{width:"100%"},attrs:{align:"justify","narrow-indicator":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[e.$store.getters.online?a("q-tab",{staticClass:"text-primary",attrs:{name:"preguntas",label:"Preguntas"}}):e._e(),a("q-tab",{staticClass:"text-primary",attrs:{name:"respuestas",label:"Respuestas"}}),e.$store.getters.online?a("q-tab",{staticClass:"text-primary",attrs:{name:"estadisticas",label:"Estadisticas"}}):e._e()],1)],1),a("q-card",[a("q-separator"),a("q-tab-panels",{staticClass:"text-center",attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"preguntas"}},[e.formulario?a("q-page",{staticClass:"bg-white pagina",attrs:{id:"crearFormulario"}},[a("q-card-section",{staticClass:"bg-white"},[a("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[a("q-form",{ref:"formCentro"},[a("div",{staticClass:"row q-mb-xl"},[a("div",[e.loading?e._e():a("q-btn",{attrs:{right:"",icon:"chevron_left"},on:{click:e.regresar}},[e._v("\n                       Regresar\n                     ")])],1)]),a("div",{staticClass:"row q-col-gutter-md bg-grey-2"},[a("div",{staticClass:"col-12"},[a("label",{staticStyle:{display:"inline-flex"}},[e._v("Nombre:")]),e.formulario.editandoNombre?a("q-input",{staticStyle:{width:"80%",display:"inline-flex"},attrs:{readonly:e.readonly,"input-class":"inputcampo bg-white",dense:"",autofocus:""},model:{value:e.formulario.temp,callback:function(t){e.$set(e.formulario,"temp",t)},expression:"formulario.temp"}}):e._e(),e.formulario.editandoNombre?e._e():a("label",{staticClass:"nombreFormulario",attrs:{readonly:e.readonly}},[e._v("\n                       "+e._s(e.formulario.nombre)+"\n                     ")])],1),a("div",{staticClass:"col-12 col-md-4"},[a("q-input",{attrs:{dense:"",readonly:e.readonly,label:"Fecha Inicio","lazy-rules":"",rules:[function(t){return t&&e.isValidDate(t)&&/\d{1,2}\/\d{1,2}\/\d{4}/.test(t)||"Ingrese un Fecha Inicio válido"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxyFechaInicio",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{readonly:e.readonly,mask:"DD/MM/YYYY","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Ingrese un FechaInicio válido"}]},on:{input:function(){return e.$refs.qDateProxyFechaInicio.hide()}},model:{value:e.formulario.fecha_inicio_formulario,callback:function(t){e.$set(e.formulario,"fecha_inicio_formulario",t)},expression:"formulario.fecha_inicio_formulario"}})],1)],1)]},proxy:!0}],null,!1,1193357861),model:{value:e.formulario.fecha_inicio_formulario,callback:function(t){e.$set(e.formulario,"fecha_inicio_formulario",t)},expression:"formulario.fecha_inicio_formulario"}})],1),a("div",{staticClass:"col-12 col-md-4"},[a("q-input",{attrs:{dense:"",readonly:e.readonly,label:"Fecha Fin","lazy-rules":"",rules:[function(t){return t&&e.isValidDate(t)&&/\d{1,2}\/\d{1,2}\/\d{4}/.test(t)||"Ingrese un Fecha Fin válido"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxyFechaFin",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{readonly:e.readonly,mask:"DD/MM/YYYY","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Ingrese un FechaFin válido"}]},on:{input:function(){return e.$refs.qDateProxyFechaFin.hide()}},model:{value:e.formulario.fecha_fin_formulario,callback:function(t){e.$set(e.formulario,"fecha_fin_formulario",t)},expression:"formulario.fecha_fin_formulario"}})],1)],1)]},proxy:!0}],null,!1,1389698341),model:{value:e.formulario.fecha_fin_formulario,callback:function(t){e.$set(e.formulario,"fecha_fin_formulario",t)},expression:"formulario.fecha_fin_formulario"}})],1),a("div",{staticClass:"col-12 col-md-4"},[a("q-select",{attrs:{readonly:e.readonly,dense:"",label:"Tipo de Formulario",options:e.tipos_formularios,loading:e.loadingTiposFormularios,"lazy-rules":"",rules:[function(e){return e||"Selecciona un tipo de formulario"}],"option-value":"id","option-label":"nombre","emit-value":"","map-options":""},scopedSlots:e._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[e._v("\n                             No hay resultados disponibles\n                           ")])],1)]},proxy:!0}],null,!1,2504163339),model:{value:e.formulario.id_tipo,callback:function(t){e.$set(e.formulario,"id_tipo",t)},expression:"formulario.id_tipo"}})],1)]),e._e(),a("div",{staticClass:"row q-col-gutter-md bg-grey-2"},[a("div",{staticClass:"col-12"},[a("label",{staticStyle:{display:"inline-flex","font-weight":"600"}},[e._v("\n                       "+e._s(e.app_url)+"\n                     ")]),e.formulario.editandoUrl?a("q-input",{staticStyle:{width:"328px",display:"inline-flex"},attrs:{readonly:e.readonly,"input-class":"bg-white",dense:"",autofocus:""},model:{value:e.formulario.temp,callback:function(t){e.$set(e.formulario,"temp",t)},expression:"formulario.temp"}}):e._e(),e.formulario.editandoUrl?e._e():a("label",{staticClass:"nombreFormulario",attrs:{readonly:e.readonly}},[e._v("\n                       "+e._s(e.formulario.url)+"\n                     ")])],1)]),a("div",{staticClass:"row"},[5561===e.formulario.id_tipo?a("div",{staticClass:"col-12 col-md-3"},[a("q-input",{staticStyle:{"font-size":"20px","font-weight":"bold"},attrs:{readonly:"",type:"number",label:"Puntos del formulario"},model:{value:e.formulario.nota_maxima,callback:function(t){e.$set(e.formulario,"nota_maxima",t)},expression:"formulario.nota_maxima"}})],1):e._e(),5561===e.formulario.id_tipo?a("div",{staticClass:"col-12 col-md-5"},[a("q-toggle",{staticStyle:{"margin-top":"10px"},attrs:{disable:e.readonly},model:{value:e.formulario.ordenar_aleatoriamente,callback:function(t){e.$set(e.formulario,"ordenar_aleatoriamente",t)},expression:"formulario.ordenar_aleatoriamente"}},[e._v("\n                       Ordenar preguntas aleatoriamente\n                     ")])],1):e._e(),a("div",{staticClass:"col-md-12 col-12"},[a("q-option-group",{attrs:{disable:e.readonly,options:e.modos,color:"primary",inline:""},model:{value:e.formulario.id_modo,callback:function(t){e.$set(e.formulario,"id_modo",t)},expression:"formulario.id_modo"}})],1)]),a("br"),e._l(e.formulario.secciones,(function(t,i){return a("div",{key:t.id,staticClass:"row q-col-gutter-md bg-grey-2",staticStyle:{"margin-top":"50px"}},[a("div",{staticClass:"row full-width"},[a("div",{staticClass:"col-11"},[a("label",{staticClass:"seccion-titulo"},[e._v("\n                         "+e._s("Sección "+(i+1))+"\n                       ")])]),a("div",{staticClass:"0ffset-11"},[e.readonly?e._e():a("q-btn",{attrs:{flat:"",color:"red",icon:"delete_forever"},on:{click:function(a){return e.eliminarSeccion(t)}}})],1)]),a("div",{staticClass:"col-12"},[t.editandoTitulo?a("q-input",{staticStyle:{"background-color":"white"},attrs:{readonly:e.readonly,"input-class":"inputcampo","full-width":"",outlined:"",autofocus:"",color:"primary",label:"Titulo"},on:{blur:function(a){return e.finalizarEdicionTitulo(t)},keyup:[function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.finalizarEdicionTitulo(t)},function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"esc",27,a.key,["Esc","Escape"])?null:e.cancelarEdicionTitulo(t)}]},model:{value:t.tempTitulo,callback:function(a){e.$set(t,"tempTitulo",a)},expression:"seccion.tempTitulo"}}):e._e(),t.editandoTitulo?e._e():a("label",{staticClass:"campo",attrs:{readonly:e.readonly},on:{click:function(a){return e.modoEdicionTitulo(t)}}},[e._v("\n                       "+e._s(t.titulo)+"\n                     ")]),a("q-editor",{attrs:{readonly:e.readonly,color:"primary","min-height":"15rem",autofocus:"",toolbar:[[{label:e.$q.lang.editor.align,icon:e.$q.iconSet.editor.align,fixedLabel:!0,options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],[,"fullscreen"],[{label:e.$q.lang.editor.formatting,icon:e.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:e.$q.lang.editor.fontSize,icon:e.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:e.$q.lang.editor.defaultFont,icon:e.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},model:{value:t.descripcion,callback:function(a){e.$set(t,"descripcion",a)},expression:"seccion.descripcion"}}),e._l(t.campos,(function(t,i){return a("div",{key:t.id},[a("FormularioItem",{ref:"formularioItem",refInFor:!0,attrs:{readonly:e.readonly,index:i,campo:t,idTipoFormulario:e.formulario.id_tipo}})],1)}))],2)])}))],2)],1),a("q-inner-loading",{attrs:{showing:e.loading}},[a("q-spinner-gears",{attrs:{size:"50px",color:"primary"}})],1)],1)],1):e._e()],1),a("q-tab-panel",{attrs:{name:"respuestas"}},[a("div",{staticClass:"text-h6"},[e._v("Respuestas")]),a("div",{staticClass:"q-pa-md q-gutter-md"},[a("div",{staticClass:"row q-gutter-md"},[e.$q.platform.is.mobile&&e.$store.state.internetAvailable?a("div",[e.selected.length>0&&e.selected[0].id_respuesta<0?a("q-btn",{attrs:{icon:"fas fa-cloud-upload-alt",dense:"",loading:e.loading,color:"green",label:"Enviar"},on:{click:e.enviarAlServidor}}):e._e(),e.selected.length>0&&e.selected[0].id_respuesta>0?a("q-btn",{staticClass:"bg-primary text-white",staticStyle:{"margin-left":"2em"},attrs:{to:"/resultados/formulario/"+this.selected[0].id_formulario+"/respuesta/"+this.selected[0].id_respuesta}},[e._v("\n                 Ver\n               ")]):e._e()],1):e._e(),e.$q.platform.is.desktop?a("div",[e.loading?e._e():a("q-btn",{attrs:{right:"",icon:"chevron_left"},on:{click:e.regresar}},[e._v("\n                 Regresar\n               ")]),e._v("\n                \n\n                "),e.selected.length>0&&e.selected[0].id_respuesta>0?a("q-btn",{staticClass:"bg-primary text-white",attrs:{to:"/resultados/formulario/"+this.selected[0].id_formulario+"/respuesta/"+this.selected[0].id_respuesta}},[e._v("\n                 Ver\n               ")]):e._e(),e._v("\n \n               "),this.selected[0]&&e.btnVisible("Evaluar",this.selected[0])?a("q-btn",{staticClass:"bg-yellow text-black",attrs:{to:"/resultados/formulario/"+this.selected[0].id_formulario+"/respuesta/"+this.selected[0].id_respuesta+"/evaluar"}},[e._v("\n                 Evaluar\n               ")]):e._e()],1):e._e(),a("q-btn",{staticClass:"bg-primary text-white",attrs:{icon:"autorenew"},on:{click:e.CargarRespuestas}})],1),a("br"),a("div",{staticClass:"row q-pa"},[a("div",{staticClass:"col-md-4"})]),a("q-table",{attrs:{dense:e.$q.screen.lt.md,title:"Respuestas",data:e.respuestas,columns:e.columns,"row-key":"id_respuesta",selection:"single",selected:e.selected,loading:e.loadingTable,pagination:e.pagination,filter:e.filtro},on:{"update:selected":function(t){e.selected=t},"update:pagination":function(t){e.pagination=t},request:e.onRequest},scopedSlots:e._u([{key:"top",fn:function(){return[a("q-btn",{attrs:{icon:"fas fa-file-excel",dense:"",color:"green",disable:e.loading||!e.$store.state.internetAvailable,label:"Descargar Excel"},on:{click:e.descargarExcel}}),a("q-space"),a("q-input",{attrs:{placeholder:"Buscar",dense:"",debounce:"300",color:"primary"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filtro,callback:function(t){e.filtro=t},expression:"filtro"}})]},proxy:!0}])})],1)]),a("q-tab-panel",{attrs:{name:"estadisticas"}},[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"text-h6"},[e._v("Estadísticas")]),e._l(e.estadisticas,(function(t){return a("div",{key:t.name,staticClass:"row q-pa-md q-col-gutter-md"},[a("div",{staticClass:"col-12 col-md-4"},e._l(e.global.filter((function(e){return e.id_campo===t.id})),(function(i,o){return a("div",{key:o,staticClass:"datos text-teal",domProps:{innerHTML:e._s(e.items(i,t))}})})),0),1===t.tipo||2===t.tipo&&3===JSON.parse(t.tipo_input).id||6===t.tipo||4===t.tipo||5===t.tipo?a("div",{staticClass:"col-12 col-md-8"},[a("Highcharts",{attrs:{options:e.getStatisticsChartOption(t)}})],1):a("div",{staticClass:"col-12 col-md-8 flex flex-center"},[a("div",[e._v("\n                 Ultimas respuestas\n                 "),a("div",{staticClass:"text-primary",domProps:{innerHTML:e._s(e.UltimasRespuestas(e.detalle_respuestas,t))}})])])])}))],2)])],1)],1)],1)},o=[],r=(a("7514"),a("c5f6"),a("7f7f"),a("a481"),a("28a5"),a("bc3a")),n=a.n(r),s=a("c1df"),l=a.n(s),c=a("0a93"),u=a("9808"),d=a("ea7f"),f=a.n(d),m=a("58a2"),p={components:{Highcharts:Object(m["a"])("Highcharts",f.a),FormularioItem:u["a"]},data:function(){var e=[{name:"nombre_participante",required:!0,label:"Participante",align:"left",field:function(e){return e.nombre_participante},format:function(e){return"".concat(e||"Anónimo")},sortable:!0}];return this.$q.platform.is.mobile&&e.push({name:"id_respuesta",required:!1,label:"Sincronizado",align:"left",field:function(e){return e.id_respuesta},format:function(e){return void 0===e||e<0?"No sincronizado":"Sincronizado"},sortable:!0}),e.push({name:"cedula_participante",required:!0,label:"Cédula",align:"left",field:function(e){return e.cedula_participante||e.numero_de_cedula},format:function(e){return"".concat(e||"N/A")},sortable:!0},{name:"correo",required:!0,label:"correo",align:"left",field:function(e){return e.correo},format:function(e){return"".concat(e||"N/A")},sortable:!0},{name:"telefono",required:!0,label:"telefono",align:"left",field:function(e){return e.telefono||e.numero_telefonico_del_participante},format:function(e){return"".concat(e||"N/A")},sortable:!0},{name:"centro",required:!0,label:"centro",align:"left",field:function(e){return e.centro||e.nombre_del_centro},format:function(e){return"".concat(e||"N/A")},sortable:!0},{name:"curso",required:!0,label:"curso",align:"left",field:function(e){return e.curso||e.cursosseminarios_ccsn},format:function(e){return"".concat(e||"N/A")},sortable:!0},{name:"fecha_inicio_formulario",required:!0,label:"fecha_inicio_formulario",align:"left",field:function(e){return e.fecha_inicio_formulario},format:function(e){return"".concat(e||"N/A")},sortable:!0},{name:"fecha_fin_formulario",required:!0,label:"fecha_fin_formulario",align:"left",field:function(e){return e.fecha_fin_formulario},format:function(e){return"".concat(e||"N/A")},sortable:!0},{name:"nota",required:!0,label:"nota",align:"right",field:function(e){return e.nota},format:function(e){return"".concat(e||"N/A")},sortable:!0}),{estadisticas:[],global:[],detalle_respuestas:[],copiado:!1,showOptions:!1,selectedOption:null,loading:!1,loadingTipos:!1,loadingTiposFormularios:!1,loadingTemas:!1,tipos_formularios:[],temas:[],modos:[{label:"Vinculado",value:5603},{label:"Abierto",value:5604},{label:"Anónimo",value:5605}],readonly:!0,tab:"respuestas",confirm:!1,id_formulario:null,id_respuesta:null,selected:[],formulario:null,curso:null,respuestas:[],loadingTable:!1,filtro:"",pagination:{sortBy:"id_respuesta",descending:!0,page:1,rowsPerPage:20,rowsNumber:20},columns:e}},created:function(){this.loading=!0,this.id_formulario=this.$route.params.id_formulario,this.CargarRespuestas(),this.CargarFormulario(),this.CargarEstadisticas()},methods:{UltimasRespuestas:function(e,t){var a='<ul class="text-left q-mt-xl" style="list-style-type:none;">';return 2===t.tipo&&e.filter((function(e){return e.id_formulario_campo===t.id})).slice(-5).forEach((function(e){a+="<li>"+e.valor+"</li>"})),3===t.tipo&&e.filter((function(e){return e.id_formulario_campo===t.id})).slice(-1).forEach((function(e){var t=e.valor.replace(/\[/g,"").replace(/]/g,"").replace(/"/g,"").replace(/{/g,"").replace(/}/g,"").split(",");for(var i in t){t[i];var o=t[i];a+="<li>"+o+"</li><br/>"}})),a+="</ul>",a},items:function(e,t){var a='<ul class="text-left q-mt-xl">',i=null;for(i in e)if("id_campo"!==i){if(5561!==t.id_tipo_formulario||6===t.tipo){if("Incorrectas"===i)continue;if("Correctas"===i)continue;if("Nota promedio"===i)continue;if("Valor Nota"===i)continue;if("porcentaje correcto"===i)continue;if("porcentaje incorrecto"===i)continue}if(6===t.tipo||"Detractores"!==i&&"Pasivos"!==i&&"Promotores"!==i)if("porcentaje correcto"===i)a+="<li>Correcto: "+e[i]+"%</li>";else if("porcentaje incorrecto"===i)a+="<li>Incorrecto: "+e[i]+"%</li>";else{if("Detractores"===i&&6===t.tipo){a+='<li class="text-red">'+i+": "+e[i]+"</li>";continue}if("Pasivos"===i&&6===t.tipo){a+='<li class="text-orange">'+i+": "+e[i]+"</li>";continue}if("Promotores"===i&&6===t.tipo){a+='<li class="text-green">'+i+": "+e[i]+"</li>";continue}a+="<li>"+i+": "+e[i]+"</li>"}}return a+="</ul>",a},getStatisticsChartOption:function(e){return{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},chartOptions:{chart:{height:"50%"}},title:{text:e.name},tooltip:{pointFormat:"{point.x}: <b>{point.y:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.x}</b>: {point.y:.1f} %"}}},series:[{name:e.name,data:e.estadistica}]}},CargarEstadisticas:function(){var e=this,t="http://35.203.165.142/api/formulario/estadisticas/respuestas",a={Authorization:"Bearer "+this.$store.state.token};n()({method:"post",url:t,data:{id_formulario:this.id_formulario},headers:a}).then((function(t){e.estadisticas=t.data.estadisticas,e.global=t.data.global,e.detalle_respuestas=t.data.respuestas})).catch((function(t){e.loading=!1,401===t.response.status&&(e.removeCredentials(),e.$router.push({name:"login"}))}))},scrollToTop:function(){window.scrollTo(0,0)},CargarFormulario:function(){var e=this;if(this.id_formulario){this.loading=!0;var t="http://35.203.165.142/api"+"/admin/formularios/".concat(this.id_formulario,"/edit"),a={Authorization:"Bearer "+this.$store.state.token};n()({method:"get",url:t,params:{base64:!0},headers:a}).then((function(t){e.formulario=t.data.formulario;var a=t.data.formulario;e.formulario.nombre=a.nombre,e.formulario.nota_maxima=a.nota_maxima,e.formulario.fecha_inicio_formulario=a.fecha_inicio_formulario,e.formulario.fecha_fin_formulario=a.fecha_fin_formulario,e.formulario.url=a.url,e.formulario.id=Number(a.id),e.formulario.id_tipo=Number(a.id_tipo),e.formulario.id_tema=Number(a.id_tema),e.formulario.id_centro=Number(a.id_centro),e.formulario.id_curso=Number(a.id_curso),e.formulario.id_modo=Number(a.id_modo),e.formulario.ordenar_aleatoriamente=1===a.ordenar_aleatoriamente;var i=t.data.campos;e.formulario.secciones=t.data.secciones,i.forEach((function(e,t,a){a[t].tipo_input=JSON.parse(e.tipo_input),a[t].opciones=JSON.parse(e.opciones),a[t].arregloTable=JSON.parse(e.arregloTable),e.imagen_url=e.imagen})),e.formulario.secciones.forEach((function(t,a,o){e.$set(t,"campos",i.filter((function(e){return e.id_seccion===t.id})))})),e.loading=!1,setTimeout((function(){e.scrollToTop()}),0),e.$forceUpdate()})).catch((function(t){e.loading=!1,401===t.response.status&&(e.removeCredentials(),e.$router.push({name:"login"}))}))}},isValidDate:function(e){return l()(e,"DD/MM/YYYY",!0).isValid()},regresar:function(){this.$router.push({name:"formularios"})},btnVisible:function(e,t){var a=!1;switch(e){case"Evaluar":a=5561==this.formulario.id_tipo;break;default:break}return a},enviarAlServidor:function(){var e=this;this.loading=!0;var t=this.selected[0],a="post",i={Authorization:"Bearer "+this.$store.state.token},o="http://35.203.165.142/api/responder/formulario/"+t.formulario.url;n()({method:a,url:o,data:{formulario:t.formulario,tipo_identidad:t.tipo_identidad,doc_identidad:t.doc_identidad,id_centro:t.id_centro,id_curso:t.id_curso,fecha_inicio_formulario:t.fecha_inicio_formulario},headers:i}).then((function(a){if(e.$q.notify({color:"green-4",textColor:"white",icon:"fas fa-check-circle",message:"Formulario enviado correctamente",position:"bottom",timeout:2e3}),e.$q.platform.is.mobile){var i=Object(c["i"])("Respuestas");t.enviado=1;var o=e;i.save(t).then((function(e){o.selected=[],o.CargarRespuestas()}))}})).catch((function(t){e.loading=!1,e.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:t.response.data}),401===t.response.status&&(e.removeCredentials(),e.$router.push({name:"login"}))}))},descargarExcel:function(){var e=this;this.loading=!0;var t="post",a="http://35.203.165.142/api/respuestas/formulario/descargar",i={Authorization:"Bearer "+this.$store.state.token};n()({method:t,responseType:"blob",url:a,data:{id_formulario:this.formulario.id},headers:i}).then((function(t){e.loading=!1;var a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,e.formulario.nombre,i.setAttribute("download",e.formulario.nombre+".xlsx"),document.body.appendChild(i),i.click()})).catch((function(t){e.loading=!1,e.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:t.response.data}),401===t.response.status&&(e.removeCredentials(),e.$router.push({name:"login"}))}))},onRequest:function(e){this.CargarRespuestas(e)},removeCredentials:function(){this.$store.dispatch("removeCredentials")},filtrarRespuestas:function(e,t,a){var i=this;t((function(){i.CargarRespuestas(e)}))},CargarRespuestas:function(e){var t=this,a=this.pagination.rowsPerPage,i=this.pagination.page,o=this.pagination.sortBy,r=this.pagination.descending;if(e&&e.pagination&&(i=e.pagination.page,a=e.pagination.rowsPerPage,o=e.pagination.sortBy,r=e.pagination.descending),this.loadingTable=!0,this.respuestas=[],this.$q.platform.is.mobile){var s=Object(c["i"])("Respuestas");s.find({id_formulario:this.id_formulario,enviado:-1}).then((function(e){for(var a=0;a<e.length;a++){var i=e[a];t.respuestas.push({id:i.id,nombre_participante:i.nombre_participante,fecha_inicio_formulario:i.fecha_inicio_formulario,fecha_fin_formulario:i.fecha_fin_formulario,id_respuesta:i.id_respuesta,id_formulario:i.id_formulario,formulario:JSON.parse(i.formulario),id_curso:i.id_curso,id_centro:i.id_centro,tipo_identidad:i.tipo_identidad,doc_identidad:i.doc_identidad,id_participante:i.id_participante})}})).catch((function(e){console.error("No se encontraron respuestas",e)}))}else{var l="http://35.203.165.142/api/respuestas/formulario/"+this.id_formulario,u={Authorization:"Bearer "+this.$store.state.token};n()({method:"get",url:l,params:{rowsPerPage:a,filtro:this.filtro,page:i,sortBy:o,descending:r,table_format:!0,id_formulario:this.id_formulario},headers:u}).then((function(e){e.data,t.curso=e.data.curso.curso,t.loadingTable=!1,t.respuestas=t.respuestas.concat(e.data.respuestas.data),t.loading=!1,t.loadingTable=!1,t.pagination.rowsNumber=e.data.respuestas.data.length>0?e.data.respuestas.data[0].total_rows:0,t.pagination,t.pagination.rowsPerPage=a,t.pagination.page=e.data.respuestas.current_page,t.pagination.sortBy=o,t.pagination.descending=r})).catch((function(e){t.loading=!1,t.loadingTable=!1,t.pagination.rowsNumber=t.respuestas.length,t.pagination.rowsPerPage=a,401===e.response.status&&(t.removeCredentials(),t.$router.push({name:"login"}))}))}}},computed:{ancho:function(){var e=this.$q.screen.lt,t="768px";return e.md&&(t="768px"),e.sm&&(t=window.screen.width+"px"),t},app_url:function(){return"http://34.72.90.164#/responder/formulario/"}},directives:{focus:{inserted:function(e){e.focus()}}}},_=p,h=(a("2cd5"),a("2877")),g=Object(h["a"])(_,i,o,!1,null,null,null);t["default"]=g.exports},"2cd5":function(e,t,a){"use strict";var i=a("bd2a"),o=a.n(i);o.a},bd2a:function(e,t,a){}}]);