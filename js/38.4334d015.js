(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[38],{dca8:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("div",{staticClass:"q-pa-md q-gutter-md"},[a("div",{staticClass:"row q-gutter-md"},[a("q-btn",{staticClass:"bg-primary text-white",attrs:{to:"/admin/instructores/nuevo"}},[e._v("\n        Nuevo\n      ")]),e.selected.length>0&&"Activo"===e.selected[0].estado?a("q-btn",{staticClass:"bg-primary text-white",attrs:{to:"/admin/instructores/"+this.selected[0].id+"/editar"}},[e._v("\n        Editar\n      ")]):e._e(),e.selected.length>0&&"Inactivo"===e.selected[0].estado?a("q-btn",{staticClass:"bg-green text-white",on:{click:e.activarProfesor}},[e._v("\n        "+e._s("Activo"===e.selected[0].estado?"Inactivar":"Activar")+"\n      ")]):e._e(),e.selected.length>0&&"Activo"===e.selected[0].estado?a("q-btn",{staticClass:"bg-negative text-white",on:{click:e.pregunarEliminar}},[e._v("\n        Eliminar\n      ")]):e._e(),a("q-btn",{staticClass:"bg-primary text-white",attrs:{icon:"autorenew"},on:{click:e.CargarProfesores}})],1),a("q-table",{attrs:{dense:e.$q.screen.lt.md,title:"Instructores",data:e.instructores,columns:e.columns,"row-key":"id",selection:"single",selected:e.selected,loading:e.loadingTable,pagination:e.pagination,filter:e.filtro},on:{"update:selected":function(t){e.selected=t},"update:pagination":function(t){e.pagination=t},request:e.onRequest},scopedSlots:e._u([{key:"top",fn:function(){return[a("q-btn",{attrs:{icon:"fas fa-file-excel",dense:"",color:"green",disable:e.loading,label:"Descargar Excel"},on:{click:e.descargarExcel}}),a("q-space"),a("q-input",{attrs:{placeholder:"Buscar",dense:"",debounce:"300",color:"primary"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filtro,callback:function(t){e.filtro=t},expression:"filtro"}})]},proxy:!0}])})],1),a("q-dialog",{attrs:{persistent:""},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-avatar",{attrs:{icon:"warning",color:"primary","text-color":"white"}}),a("span",{staticClass:"q-ml-sm"},[e._v("\n          Esta seguro que desea eliminar el profesor seleccionado?\n        ")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"default"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-primary text-white",attrs:{flat:"",label:"Aceptar"},on:{click:e.eliminarProfesore}})],1)],1)],1)],1)},o=[],r=a("a34a"),i=a.n(r),s=(a("96cf"),a("c973")),l=a.n(s),c=a("bc3a"),u=a.n(c),d={data:function(){return{confirm:!1,selected:[],visibleColumns:["id","nombres","apellidos","telefono","id_pais","id_departamento","id_municipio","sexo","fecha_nacimiento","id_tipo_identificacion","documento_identidad","fecha_ingreso","especialidad","calificacion","id_nivel_academico"],instructores:[],profesor:null,loadingTable:!1,filtro:"",pagination:{sortBy:"id",descending:!0,page:1,rowsPerPage:10,rowsNumber:10},columns:[{name:"nombres",required:!0,label:"Nombres",align:"left",field:function(e){return e.nombres},format:function(e){return"".concat(e)},sortable:!0},{name:"apellidos",required:!0,label:"Apellidos",align:"left",field:function(e){return e.apellidos},format:function(e){return"".concat(e)},sortable:!0},{name:"email",required:!0,label:"correo",align:"left",field:function(e){return e.email},format:function(e){return"".concat(e)},sortable:!0},{name:"centros_asignados",required:!0,label:"Centros asignados",align:"left",field:function(e){return e.centros_asignados},format:function(e){return"".concat(e)},sortable:!0},{name:"telefono_1",required:!0,label:"Telefono Claro",align:"left",field:function(e){return e.telefono_1?e.telefono_1:"-"},format:function(e){return"".concat(e)},sortable:!0},{name:"telefono_2",required:!0,label:"Telefono Movistar",align:"left",field:function(e){return e.telefono_2?e.telefono_2:"-"},sortable:!0},{name:"telefono_otro",required:!0,label:"Otro Telefono",align:"left",field:function(e){return e.telefono_otro?e.telefono_otro:"-"},sortable:!0},{name:"pais",required:!0,label:"Pais",align:"left",field:function(e){return e.pais},format:function(e){return"".concat(e)},sortable:!0},{name:"departamento",required:!0,label:"Departamento",align:"left",field:function(e){return e.departamento},format:function(e){return"".concat(e)},sortable:!0},{name:"municipio",required:!0,label:"Municipio",align:"left",field:function(e){return e.municipio},format:function(e){return"".concat(e)},sortable:!0},{name:"sexo",required:!0,label:"Sexo",align:"left",field:function(e){return e.sexo},format:function(e){return"".concat(e)},sortable:!0},{name:"edad",required:!0,label:"Edad",align:"left",field:function(e){return e.edad},format:function(e){return"".concat(e)},sortable:!0},{name:"fecha_ingreso",required:!0,label:"AÃ±os de experiencia",align:"left",field:function(e){return e.anios_experiencia},format:function(e){return"".concat(e)},sortable:!0},{name:"especialidad",required:!0,label:"Especialidad",align:"left",field:function(e){return e.especialidad},format:function(e){return"".concat(e)},sortable:!0},{name:"calificacion",required:!0,label:"Calificacion",align:"left",field:function(e){return e.calificacion},format:function(e){return"".concat(e)},sortable:!0},{name:"nivel_academico",required:!0,label:"Nivel Academico",align:"left",field:function(e){return e.nivel_academico},format:function(e){return"".concat(e)},sortable:!0},{name:"estado",required:!0,label:"estado",align:"left",field:function(e){return e.estado},format:function(e){return"".concat(e)},sortable:!0}]}},created:function(){var e=this;return l()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.CargarProfesores();case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},methods:{descargarExcel:function(){var e=this;this.loading=!0;var t="post",a="http://35.203.165.142/api/instructores/descargar",n={Authorization:"Bearer "+this.$store.state.token};u()({method:t,responseType:"blob",url:a,params:{filtro:this.filtro},headers:n}).then((function(t){e.loading=!1;var a=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=a,n.setAttribute("download","instructores.xlsx"),document.body.appendChild(n),n.click()})).catch((function(t){e.loading=!1,t.response.statusText,404!==t.response.status?(e.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:t.response.statusText}),401===t.response.status&&(e.removeCredentials(),e.$router.push({name:"login"}))):e.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:"Ruta no encontrada, si el error persiste contacta al administrador"})}))},activarProfesor:function(){this.profesor=this.selected[0],this.nuevo=!1,this.onSubmit(!0)},onSubmit:function(e){var t=this;this.loading=!0;var a="post",n="http://35.203.165.142/api/admin/instructores";this.nuevo||(n="http://35.203.165.142/api/admin/instructores/"+this.profesor.id,a="put");var o={Authorization:"Bearer "+this.$store.state.token};u()({method:a,url:n,data:{instructore:this.profesor,activar:e},headers:o}).then((function(e){t.$q.notify({color:"green-4",textColor:"white",icon:"fas fa-check-circle",message:t.nuevo?"Instructor creado correctamente":"Instructor actualizado correctamente",position:"bottom",timeout:2e3}),t.selected=[],t.CargarProfesores()})).catch((function(e){t.loading=!1,t.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:e.response.data}),401===e.response.status&&(t.removeCredentials(),t.$router.push({name:"login"}))}))},onRequest:function(e){this.CargarProfesores(e)},pregunarEliminar:function(){this.confirm=!0},eliminarProfesore:function(){var e=this,t="http://35.203.165.142/api/admin/instructores/"+this.selected[0].id,a={Authorization:"Bearer "+this.$store.state.token};u()({method:"delete",url:t,headers:a}).then((function(t){e.$q.notify({color:"green-4",textColor:"white",icon:"fas fa-check-circle",message:"Instructor eliminado correctamente",position:"bottom",timeout:2e3}),e.selected=[],e.CargarProfesores()})).catch((function(t){e.loading=!1,e.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:t.response.data}),401===t.response.status&&(e.removeCredentials(),e.$router.push({name:"login"}))}))},removeCredentials:function(){this.$store.dispatch("removeCredentials")},CargarProfesores:function(e){var t=this;this.loadingTable=!0;var a=this.pagination.rowsPerPage,n=this.pagination.page;e&&e.pagination&&(n=e.pagination.page,a=e.pagination.rowsPerPage),this.loadingProfesores=!0;var o="http://35.203.165.142/api/admin/instructores",r={Authorization:"Bearer "+this.$store.state.token};u()({method:"get",url:o,params:{rowsPerPage:a,filtro:this.filtro,page:n},headers:r}).then((function(e){t.loadingTable=!1,t.instructores=e.data.instructores.data,t.loadingProfesores=!1,t.instructores=e.data.instructores.data,t.loading=!1,t.loadingProfesores=!1,t.pagination.rowsNumber=e.data.instructores.total,t.pagination.rowsPerPage=a,t.pagination.page=e.data.instructores.current_page})).catch((function(e){t.loadingProfesores=!1,t.loadingTable=!1,401===e.response.status&&(t.removeCredentials(),t.$router.push({name:"login"}))}))}}},f=d,m=a("2877"),p=Object(m["a"])(f,n,o,!1,null,"5a6b5983",null);t["default"]=p.exports}}]);