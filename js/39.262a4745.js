(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[39],{"10d4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("div",{staticClass:"q-pa-md q-gutter-md"},[a("div",{staticClass:"row q-gutter-md"},[e.selected&&e.selected.length>0?a("q-btn",{staticClass:"bg-primary text-white",attrs:{to:"/admin/participantes/"+this.selected[0].id+"/Ver"}},[e._v("\n        Ver\n      ")]):e._e(),e.selected&&e.selected.length>0?a("q-btn",{staticClass:"bg-primary text-white",attrs:{to:"/admin/participantes/"+this.selected[0].id+"/editar"}},[e._v("\n        Editar\n      ")]):e._e(),e.selected&&e.selected.length>0&&"Activo"===e.selected[0].estado?a("q-btn",{staticClass:"bg-negative text-white",on:{click:e.pregunarEliminar}},[e._v("\n        Inactivar\n      ")]):e._e(),e.selected&&e.selected.length>0&&"Inactivo"===e.selected[0].estado?a("q-btn",{staticClass:"bg-green text-white",on:{click:e.pregunarEliminar}},[e._v("\n        Activar\n      ")]):e._e(),a("q-btn",{staticClass:"bg-primary text-white",attrs:{icon:"autorenew"},on:{click:e.CargarEstudiantes}})],1),a("q-table",{attrs:{dense:e.$q.screen.lt.md,title:"Participantes",data:e.participantes,columns:e.columns,"row-key":"id",selection:"single",selected:e.selected,loading:e.loadingTable,pagination:e.pagination,filter:e.filtro},on:{"update:selected":function(t){e.selected=t},"update:pagination":function(t){e.pagination=t},request:e.onRequest},scopedSlots:e._u([{key:"top",fn:function(){return[a("q-btn",{attrs:{icon:"fas fa-file-excel",dense:"",color:"green",disable:e.loading,label:"Descargar Excel"},on:{click:e.descargarExcel}}),a("q-space"),a("q-input",{attrs:{placeholder:"Buscar",dense:"",debounce:"300",color:"primary"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filtro,callback:function(t){e.filtro=t},expression:"filtro"}})]},proxy:!0}])})],1),a("q-dialog",{attrs:{persistent:""},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-avatar",{attrs:{icon:"warning",color:"primary","text-color":"white"}}),a("span",{staticClass:"q-ml-sm"},[e._v("\n          Esta seguro que desea eliminar el participante seleccionado?\n        ")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"default"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-primary text-white",attrs:{flat:"",label:"Aceptar"},on:{click:e.eliminarEstudiante}})],1)],1)],1)],1)},i=[],r=a("a34a"),o=a.n(r),c=(a("96cf"),a("c973")),s=a.n(c),l=a("bc3a"),d=a.n(l),u={data:function(){return{confirm:!1,selected:[],visibleColumns:["id","foto","nombres","apellidos","telefono","id_tipo_identificacion","documento_identidad","menor_edad","fecha_nacimiento","id_estado_civil","sexo","id_pais","id_departamento","id_ciudad","direccion","id_nivel_educacion","estudiando","curso_estudiando","trabajando","lugar_trabajo","salario","referencia_nombre","referencia_cedula","referencia_telefono","referencia_correo"],participantes:[],loading:!1,loadingTable:!1,filtro:"",pagination:{sortBy:"id",descending:!0,page:1,rowsPerPage:10,rowsNumber:10},columns:[{name:"nombre_completo",required:!0,label:"Nombre participante",align:"left",field:function(e){return e.nombre_completo},format:function(e){return"".concat(e)},sortable:!0},{name:"telefono",required:!0,label:"Telefono",align:"left",field:function(e){return e.telefono},format:function(e){return"".concat(e)},sortable:!0},{name:"documento_identidad",required:!0,label:"Cedula",align:"left",field:function(e){return e.documento_identidad},format:function(e){return"".concat(e)},sortable:!0},{name:"fecha_nacimiento",required:!0,label:"Fecha Nacimiento",align:"left",field:function(e){return e.fecha_nacimiento},format:function(e){return"".concat(e)},sortable:!0},{name:"edad",required:!0,label:"Edad",align:"left",field:function(e){return e.edad},format:function(e){return"".concat(e)},sortable:!0},{name:"estado_civil",required:!0,label:"Estado Civil",align:"left",field:function(e){return e.estado_civil},format:function(e){return"".concat(e)},sortable:!0},{name:"sexo",required:!0,label:"Sexo",align:"left",field:function(e){return e.sexo},format:function(e){return"".concat(e)},sortable:!0},{name:"pais",required:!0,label:"Pais",align:"left",field:function(e){return e.pais},format:function(e){return"".concat(e)},sortable:!0},{name:"departamento",required:!0,label:"Departamento",align:"left",field:function(e){return e.departamento},format:function(e){return"".concat(e)},sortable:!0},{name:"ciudad",required:!0,label:"Ciudad",align:"left",field:function(e){return e.ciudad},format:function(e){return"".concat(e)},sortable:!0},{name:"direccion",required:!0,label:"Dirección",align:"left",field:function(e){return e.direccion},format:function(e){return"".concat(e)},sortable:!0},{name:"nivel_educacion",required:!0,label:"Nivel Educación",align:"left",field:function(e){return e.nivel_educacion},format:function(e){return"".concat(e)},sortable:!0},{name:"estado",required:!0,label:"Estado",align:"left",field:function(e){return e.estado},format:function(e){return"".concat(e)},sortable:!0}]}},created:function(){var e=this;return s()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.CargarEstudiantes();case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},methods:{descargarExcel:function(){var e=this;this.loading=!0;var t="post",a="http://35.203.165.142/api/participantes/descargar",n={Authorization:"Bearer "+this.$store.state.token};d()({method:t,responseType:"blob",url:a,headers:n}).then((function(t){e.loading=!1;var a=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=a,n.setAttribute("download","participantes.xlsx"),document.body.appendChild(n),n.click()})).catch((function(t){e.loading=!1,e.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:t.response.data.message}),401===t.response.status&&(e.removeCredentials(),e.$router.push({name:"login"}))}))},onRequest:function(e){this.CargarEstudiantes(e)},nuevoEstudiante:function(){this.modalOpen=!0,this.nuevo=!0,this.LimpiarDatos()},pregunarEliminar:function(){this.confirm=!0},eliminarEstudiante:function(){var e=this,t="http://35.203.165.142/api/admin/participantes/"+this.selected[0].id,a={Authorization:"Bearer "+this.$store.state.token};d()({method:"delete",url:t,headers:a}).then((function(t){e.$q.notify({color:"green-4",textColor:"white",icon:"fas fa-check-circle",message:"Participante eliminado correctamente",position:"bottom",timeout:2e3}),e.selected=[],e.CargarEstudiantes()})).catch((function(t){e.loading=!1,e.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:t.response.data}),401===t.response.status&&(e.removeCredentials(),e.$router.push({name:"login"}))}))},removeCredentials:function(){this.$store.dispatch("removeCredentials")},filtrarEstudiantes:function(e,t,a){var n=this;t((function(){n.CargarEstudiantes(e)}))},CargarEstudiantes:function(e){var t=this;this.loadingTable=!0;var a=this.pagination.rowsPerPage,n=this.pagination.page;e&&e.pagination&&(n=e.pagination.page,a=e.pagination.rowsPerPage),this.loadingEstudiantes=!0;var i="http://35.203.165.142/api/admin/participantes",r={Authorization:"Bearer "+this.$store.state.token};d()({method:"get",url:i,params:{rowsPerPage:a,filtro:this.filtro,page:n},headers:r}).then((function(e){t.loadingTable=!1,t.participantes=e.data.participantes.data,t.loadingEstudiantes=!1,t.participantes=e.data.participantes.data,t.loading=!1,t.loadingEstudiantes=!1,t.pagination.rowsNumber=e.data.participantes.total,t.pagination.rowsPerPage=a,t.selected=[],t.pagination.page=e.data.participantes.current_page})).catch((function(e){t.loadingEstudiantes=!1,t.loadingTable=!1,401===e.response.status&&(t.removeCredentials(),t.$router.push({name:"login"}))}))}}},f=u,p=a("2877"),m=Object(p["a"])(f,n,i,!1,null,"5ef979cc",null);t["default"]=m.exports}}]);