(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"6b3a":function(t,e,o){},"94aa":function(t,e,o){"use strict";var i=o("6b3a"),n=o.n(i);n.a},d864:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",{},[o("div",{staticClass:"q-pa-md"},[o("q-card",[o("q-card-section",{staticClass:"bg-blue-background text-white q-gutter-sm"},[o("h5",{staticClass:"page-title"},[t._v("\n          "+t._s(t.nuevo?"Nuevo ":"Editar ")+" Instructor\n        ")])]),o("q-separator"),o("q-card-section",{staticClass:"bg-grey-2"},[o("q-form",{on:{submit:t.onSubmit}},[t.nuevo?o("div",{staticClass:"row q-col-gutter-md"},[o("div",{staticClass:"col-12 col-md-4"},[o("q-toggle",{attrs:{label:t.instructor.nuevo_usuario?"Nuevo usuario":"Selecccionar usuario existente",icon:"person"},model:{value:t.instructor.nuevo_usuario,callback:function(e){t.$set(t.instructor,"nuevo_usuario",e)},expression:"instructor.nuevo_usuario"}})],1),t.instructor.nuevo_usuario?t._e():o("div",{staticClass:"col-12 col-md-8"},[o("q-select",{attrs:{"bg-color":"white","use-input":"","input-debounce":"200",label:"Usuario",options:t.usuarios,loading:t.loadingUsuarios,"lazy-rules":"",rules:[function(t){return t||"Ingrese un usuario válido"}],"option-value":"id","option-label":"nombre","hide-selected":"","fill-input":"","emit-value":"","map-options":""},on:{filter:t.filtrarUsuarios},scopedSlots:t._u([{key:"no-option",fn:function(){return[o("q-item",[o("q-item-section",{staticClass:"text-grey"},[t._v("\n                      No hay resultados disponibles\n                    ")])],1)]},proxy:!0}],null,!1,2138845739),model:{value:t.instructor.id_usuario,callback:function(e){t.$set(t.instructor,"id_usuario",e)},expression:"instructor.id_usuario"}})],1)]):t._e(),t.nuevo&&t.instructor.nuevo_usuario?o("div",{staticClass:"row q-col-gutter-md"},[o("label",[t._v("Datos de la cuenta")])]):t._e(),t.nuevo&&t.instructor.nuevo_usuario?o("div",{staticClass:"row q-col-gutter-md"},[o("div",{staticClass:"col-12"},[o("q-input",{attrs:{"bg-color":"white",color:"primary",label:"Correo","lazy-rules":"",rules:[function(e){return e&&t.emailRegex.test(e)||"Ingrese un correo válido"}]},model:{value:t.instructor.correo,callback:function(e){t.$set(t.instructor,"correo",e)},expression:"instructor.correo"}})],1)]):t._e(),o("div",{staticClass:"row q-col-gutter-md"},[o("label",[t._v("Datos personales")])]),o("div",{staticClass:"row q-col-gutter-md"},[o("div",{staticClass:"col-12 col-md-4"},[o("q-input",{attrs:{"bg-color":"white",color:"primary",label:"Documento Identidad",mask:"###-######-####A","lazy-rules":"",rules:[function(t){return t&&t.length>0&&t.length<30||"Ingresa una cédula válida con el formato: ###-######-####X"}]},model:{value:t.instructor.documento_identidad,callback:function(e){t.$set(t.instructor,"documento_identidad",e)},expression:"instructor.documento_identidad"}})],1),o("div",{staticClass:"col-12 col-md-4"},[o("q-input",{attrs:{"bg-color":"white",color:"primary",label:"Nombres","lazy-rules":"",rules:[function(t){return t&&t.length>0&&t.length<50||"Ingrese un Nombres válido"}]},model:{value:t.instructor.nombres,callback:function(e){t.$set(t.instructor,"nombres",e)},expression:"instructor.nombres"}})],1),o("div",{staticClass:"col-12 col-md-4"},[o("q-input",{attrs:{"bg-color":"white",color:"primary",label:"Apellidos","lazy-rules":"",rules:[function(t){return t&&t.length>0&&t.length<50||"Ingrese un Apellidos válido"}]},model:{value:t.instructor.apellidos,callback:function(e){t.$set(t.instructor,"apellidos",e)},expression:"instructor.apellidos"}})],1)]),o("div",{staticClass:"row q-col-gutter-md"},[o("div",{staticClass:"col-12 col-md-4"},[o("q-select",{attrs:{"bg-color":"white",label:"Pais",options:t.paises,"lazy-rules":"",rules:[function(t){return t||"Ingrese un Pais válido"}],"option-value":"id","option-label":"nombre","emit-value":"","map-options":"",readonly:""},scopedSlots:t._u([{key:"no-option",fn:function(){return[o("q-item",[o("q-item-section",{staticClass:"text-grey"},[t._v("\n                      No hay resultados disponibles\n                    ")])],1)]},proxy:!0}]),model:{value:t.instructor.id_pais,callback:function(e){t.$set(t.instructor,"id_pais",e)},expression:"instructor.id_pais"}})],1),o("div",{staticClass:"col-12 col-md-4"},[o("q-select",{attrs:{"bg-color":"white",label:"Departamento",options:t.departamentos,loading:t.loadingDepartamentos,"lazy-rules":"",rules:[function(t){return t||"Ingrese un Departamento válido"}],"option-value":"id","option-label":"nombre","emit-value":"","map-options":""},on:{input:function(e){return t.CargarMunicipios("",!0)}},scopedSlots:t._u([{key:"no-option",fn:function(){return[o("q-item",[o("q-item-section",{staticClass:"text-grey"},[t._v("\n                      No hay resultados disponibles\n                    ")])],1)]},proxy:!0}]),model:{value:t.instructor.id_departamento,callback:function(e){t.$set(t.instructor,"id_departamento",e)},expression:"instructor.id_departamento"}})],1),o("div",{staticClass:"col-12 col-md-4"},[o("q-select",{attrs:{"bg-color":"white",label:"Municipio",options:t.municipios,loading:t.loadingMunicipios,"lazy-rules":"",rules:[function(t){return t||"Ingrese un Municipio válido"}],"option-value":"id","option-label":"nombre","emit-value":"","map-options":""},scopedSlots:t._u([{key:"no-option",fn:function(){return[o("q-item",[o("q-item-section",{staticClass:"text-grey"},[t._v("\n                      No hay resultados disponibles\n                    ")])],1)]},proxy:!0}]),model:{value:t.instructor.id_municipio,callback:function(e){t.$set(t.instructor,"id_municipio",e)},expression:"instructor.id_municipio"}})],1)]),o("div",{staticClass:"row q-col-gutter-md"},[o("div",{staticClass:"col-12 col-md-4"},[o("q-select",{attrs:{"bg-color":"white",label:"Sexo",options:t.tipo_sexo,"lazy-rules":"","emit-value":"","map-options":"",rules:[function(t){return t&&t.length>0||"Seleccione el sexo del instructor"}]},model:{value:t.instructor.sexo,callback:function(e){t.$set(t.instructor,"sexo",e)},expression:"instructor.sexo"}})],1),o("div",{staticClass:"col-12 col-md-4"},[o("q-select",{attrs:{"bg-color":"white",label:"Nivel académico",options:t.nivel_academicos,loading:t.loadingNivelAcademicos,"lazy-rules":"",rules:[function(t){return t||"Ingrese un Nivel Academico válido"}],"option-value":"id","option-label":"nombre","emit-value":"","map-options":""},scopedSlots:t._u([{key:"no-option",fn:function(){return[o("q-item",[o("q-item-section",{staticClass:"text-grey"},[t._v("\n                      No hay resultados disponibles\n                    ")])],1)]},proxy:!0}]),model:{value:t.instructor.id_nivel_academico,callback:function(e){t.$set(t.instructor,"id_nivel_academico",e)},expression:"instructor.id_nivel_academico"}})],1),o("div",{staticClass:"col-12 col-md-4"},[o("q-input",{attrs:{"bg-color":"white",color:"primary",label:"Ocupación","lazy-rules":"",rules:[function(t){return t&&t.length>0&&t.length<50||"Ingrese un ocupación válido"}]},model:{value:t.instructor.ocupacion,callback:function(e){t.$set(t.instructor,"ocupacion",e)},expression:"instructor.ocupacion"}})],1)]),o("div",{staticClass:"row q-col-gutter-md"},[o("div",{staticClass:"col-12 col-md-4"},[o("q-input",{attrs:{"bg-color":"white",color:"primary",label:"Teléfono Claro","lazy-rules":"",rules:[function(e){return e&&t.phoneRegex.test(e)||!e||"Ingrese un número de telefono válido"}]},model:{value:t.instructor.telefono_1,callback:function(e){t.$set(t.instructor,"telefono_1",e)},expression:"instructor.telefono_1"}})],1),o("div",{staticClass:"col-12 col-md-4"},[o("q-input",{attrs:{"bg-color":"white",color:"primary",label:"Teléfono Movistar","lazy-rules":"",rules:[function(e){return e&&t.phoneRegex.test(e)||!e||"Ingrese un número de telefono válido"}]},model:{value:t.instructor.telefono_2,callback:function(e){t.$set(t.instructor,"telefono_2",e)},expression:"instructor.telefono_2"}})],1),o("div",{staticClass:"col-12 col-md-4"},[o("q-input",{attrs:{"bg-color":"white",color:"primary",label:"Otro Teléfono","lazy-rules":"",rules:[function(e){return e&&t.phoneRegex.test(e)||!e||"Ingrese un número de telefono válido"}]},model:{value:t.instructor.telefono_otro,callback:function(e){t.$set(t.instructor,"telefono_otro",e)},expression:"instructor.telefono_otro"}})],1)]),o("div",{staticClass:"row q-col-gutter-md"},[o("div",{staticClass:"col-12 col-md-12"},[o("q-input",{attrs:{"bg-color":"white",color:"primary",label:"Dirección","lazy-rules":"",rules:[function(t){return t&&t.length>0&&t.length<255||"Ingrese un Dirección válido"}]},model:{value:t.instructor.direccion,callback:function(e){t.$set(t.instructor,"direccion",e)},expression:"instructor.direccion"}})],1)]),o("div",{staticClass:"row q-col-gutter-md"},[o("div",{staticClass:"col-12 col-md-4"},[o("q-input",{attrs:{"bg-color":"white",label:"Fecha Nacimiento","lazy-rules":"",rules:[function(e){return e&&t.isValidDate(e)&&/\d{1,2}\/\d{1,2}\/\d{4}/.test(e)||"Ingrese una Fecha Nacimiento válida"}]},scopedSlots:t._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[o("q-popup-proxy",{ref:"qDateProxyFechaNacimiento",attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-date",{attrs:{mask:"DD/MM/YYYY","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Ingrese un FechaNacimiento válido"}]},on:{input:function(){return t.$refs.qDateProxyFechaNacimiento.hide()}},model:{value:t.instructor.fecha_nacimiento,callback:function(e){t.$set(t.instructor,"fecha_nacimiento",e)},expression:"instructor.fecha_nacimiento"}})],1)],1)]},proxy:!0}]),model:{value:t.instructor.fecha_nacimiento,callback:function(e){t.$set(t.instructor,"fecha_nacimiento",e)},expression:"instructor.fecha_nacimiento"}})],1),o("div",{staticClass:"col-12 col-md-4"},[o("q-input",{attrs:{"bg-color":"white",type:"number",label:"Años de experiencia","lazy-rules":"",rules:[function(t){return t>=0&&t<=100||"Ingrese los experiencia (Un número entre 0 y 100)"}]},model:{value:t.instructor.anios_experiencia,callback:function(e){t.$set(t.instructor,"anios_experiencia",e)},expression:"instructor.anios_experiencia"}})],1),o("div",{staticClass:"col-12 col-md-4"},[o("q-input",{attrs:{"bg-color":"white",color:"primary",label:"Especialidad"},model:{value:t.instructor.especialidad,callback:function(e){t.$set(t.instructor,"especialidad",e)},expression:"instructor.especialidad"}})],1)]),1===t.id_rol||2===t.id_rol?o("div",[o("label",[t._v("Centros")]),o("div",{staticClass:"row q-col-gutter-lg"},[o("div",{staticClass:"col-12 col-md-4"},[o("q-list",{staticStyle:{"background-color":"white"},attrs:{dense:"",padding:""}},[o("q-item-label",{attrs:{header:""}},[o("q-checkbox",{on:{input:t.selectAllCentros},model:{value:t.allCentros,callback:function(e){t.allCentros=e},expression:"allCentros"}}),t._v("\n                    Todos\n                  ")],1),t._l(t.centros,(function(e){return o("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.nombre,attrs:{tag:"label"}},[o("q-item-section",{attrs:{side:"",top:""}},[o("q-checkbox",{model:{value:e.checked,callback:function(o){t.$set(e,"checked",o)},expression:"option.checked"}})],1),o("q-item-section",[o("q-item-label",[t._v(t._s(e.nombre))])],1)],1)}))],2)],1)])]):t._e(),o("br"),o("q-card-actions",{staticClass:"row justify-between q-gutter-sm"},[o("q-btn",{attrs:{right:"",icon:"close"},on:{click:t.Cancelar}},[t._v("Cancelar")]),o("q-btn",{staticClass:"bg-primary text-white",attrs:{loading:t.loading,disable:t.loading,right:"",type:"submit",icon:"save"}},[t._v("\n              Guardar\n            ")])],1)],1)],1)],1)],1)])},n=[],r=(o("c5f6"),o("a34a")),s=o.n(r),a=(o("7f7f"),o("96cf"),o("c973")),c=o.n(a),l=(o("3b2b"),o("bc3a")),u=o.n(l),d=o("c1df"),p=o.n(d),m={data:function(){return{emailRegex:new RegExp(/^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/),phoneRegex:new RegExp(/^[\s.-]?\(?\d{4}\)?[\s.-]?\d{4}$/),nuevo:!0,allCentros:!1,instructor:{id:0,id_centro:0,id_usuario:0,nombres:"",apellidos:"",telefono_1:"",telefono_2:"",telefono_otro:"",id_pais:1438,id_departamento:null,id_municipio:null,sexo:"",direccion:"",fecha_nacimiento:p()().subtract(30,"years").format("DD/MM/YYYY"),id_tipo_identificacion:"",documento_identidad:"",anios_experiencia:0,especialidad:"",calificacion:0,id_nivel_academico:"",nuevo_usuario:!0,correo:""},loading:!1,loadingCentros:!1,loadingDepartamentos:!1,loadingMunicipios:!1,loadingNivelAcademicos:!1,loadingPaises:!1,loadingTipoIdentificaciones:!1,loadingUsuarios:!1,centros:[],departamentos:[],municipios:[],nivel_academicos:[],paises:[],tipo_identificaciones:[],tipo_sexo:[{value:"F",label:"Femenino"},{value:"M",label:"Masculino"}],usuarios:[]}},created:function(){var t=this;return c()(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.CargarCentros();case 3:if("editar_instructor"!==t.$route.name||!t.$route.params.id){e.next=9;break}return t.nuevo=!1,e.next=7,t.Cargarinstructor();case 7:e.next=11;break;case 9:t.nuevo=!0;try{t.instructor.id_departamento=t.$store.state.departamento.id,t.instructor.id_municipio=t.$store.state.municipio.id}catch(o){}case 11:return e.next=13,t.CargarUsuarios();case 13:return e.next=15,t.CargarTipoIdentificaciones();case 15:return e.next=17,t.CargarNivelAcademicos();case 17:return e.next=19,t.CargarPaises();case 19:return e.next=21,t.CargarDepartamentos("",!1);case 21:return e.next=23,t.CargarMunicipios();case 23:t.loading=!1;case 24:case"end":return e.stop()}}),e)})))()},methods:{selectAllCentros:function(){var t=this;this.centros.forEach((function(e,o,i){i[o].checked=t.allCentros}))},Cancelar:function(){this.$router.push({path:"/admin/instructores"})},Cargarinstructor:function(){var t=this;if(this.$route.params.id){this.loading=!0,this.visible=!0;var e="http://35.203.165.142/api"+"/admin/instructores/".concat(this.$route.params.id,"/edit"),o={Authorization:"Bearer "+this.$store.state.token};u()({method:"get",url:e,headers:o}).then((function(e){t.instructor=e.data.instructore,t.centros=e.data.centros,t.centros.forEach((function(t,e,o){0===t.checked&&(o[e].checked=!1)})),t.loading=!1,t.visible=!1,t.CargarMunicipios()})).catch((function(e){t.loading=!1,t.visible=!1,401===e.response.status&&(t.removeCredentials(),t.$router.push({name:"login"}))}))}},filtrarinstructores:function(t,e,o){var i=this;e((function(){i.Cargarinstructores(t)}))},filtrarUsuarios:function(t,e,o){var i=this;e((function(){i.CargarUsuarios(t)}))},isValidDate:function(t){return p()(t,"DD/MM/YYYY",!0).isValid()},InstructorTieneCentro:function(){return 1!=this.id_rol&&2!=this.id_rol||this.centros.filter((function(t){return t.checked})).length>0},onSubmit:function(){var t=this;this.loading=!0;var e="post",o="http://35.203.165.142/api/admin/instructores";this.nuevo||(o="http://35.203.165.142/api/admin/instructores/"+this.instructor.id,e="put");var i={Authorization:"Bearer "+this.$store.state.token};if(this.InstructorTieneCentro(),0==this.InstructorTieneCentro())return this.loading=!1,void this.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:"Debe seleccionar al menos un centro de estudio"});u()({method:e,url:o,data:{instructore:this.instructor,centros:this.centros},headers:i}).then((function(e){t.loading=!1,e.data.result?(t.$q.notify({color:"green-4",textColor:"white",icon:"fas fa-check-circle",message:t.nuevo?"Instructor creado correctamente":"Instructor actualizado correctamente",position:"bottom",timeout:2e3}),t.$router.push({path:"/admin/instructores"})):t.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:e.data.message})})).catch((function(e){t.loading=!1,t.$q.notify({color:"red-5",textColor:"white",icon:"fas fa-exclamation-triangle",message:e.response.data.message}),401===e.response.status&&(t.removeCredentials(),t.$router.push({name:"login"}))}))},CargarCentros:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.loadingCentros=!0;var o="http://35.203.165.142/api/catalogos/centros",i={Authorization:"Bearer "+this.$store.state.token},n={q:e};u()({method:"get",url:o,params:n,headers:i}).then((function(e){t.centros=e.data.centros,t.centros.forEach((function(t,e,o){0===t.checked&&(o[e].checked=!1)})),t.loadingCentros=!1})).catch((function(e){t.loadingCentros=!1,401===e.response.status&&(t.removeCredentials(),t.$router.push({name:"login"}))}))},CargarUsuarios:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.loadingUsuarios=!0;var o="http://35.203.165.142/api/admin/usuarios/disponibles_instructor",i={Authorization:"Bearer "+this.$store.state.token},n={filtro:e};u()({method:"get",url:o,params:n,headers:i}).then((function(e){t.usuarios=e.data.usuarios,t.loadingUsuarios=!1})).catch((function(e){t.loadingUsuarios=!1,401===e.response.status&&(t.removeCredentials(),t.$router.push({name:"login"}))}))},CargarDepartamentos:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.loadingDepartamentos=!0;var i="http://35.203.165.142/api/catalogos/departamentos",n={Authorization:"Bearer "+this.$store.state.token},r={q:e,id_padre:null!==this.instructor.id_pais?this.instructor.id_pais:""};u()({method:"get",url:i,params:r,headers:n}).then((function(e){t.departamentos=e.data.departamentos,t.loadingDepartamentos=!1,o&&(t.instructor.id_municipio=0)})).catch((function(e){t.loadingDepartamentos=!1,401===e.response.status&&(t.removeCredentials(),t.$router.push({name:"login"}))}))},CargarMunicipios:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o&&(this.instructor.id_municipio=null),this.loadingMunicipios=!0;var i="http://35.203.165.142/api/catalogos/municipios",n={Authorization:"Bearer "+this.$store.state.token},r={q:e,id_padre:null!==this.instructor.id_departamento?this.instructor.id_departamento:""};u()({method:"get",url:i,params:r,headers:n}).then((function(e){t.municipios=e.data.municipios,t.loadingMunicipios=!1})).catch((function(e){t.loadingMunicipios=!1,401===e.response.status&&(t.removeCredentials(),t.$router.push({name:"login"}))}))},CargarNivelAcademicos:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.loadingNivelAcademicos=!0;var o="http://35.203.165.142/api/catalogos/nivel_academicos",i={Authorization:"Bearer "+this.$store.state.token},n={q:e};u()({method:"get",url:o,params:n,headers:i}).then((function(e){t.nivel_academicos=e.data.nivel_academicos,t.loadingNivelAcademicos=!1})).catch((function(e){t.loadingNivelAcademicos=!1,401===e.response.status&&(t.removeCredentials(),t.$router.push({name:"login"}))}))},CargarPaises:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.loadingPaises=!0;var o="http://35.203.165.142/api/catalogos/paises",i={Authorization:"Bearer "+this.$store.state.token},n={q:e};u()({method:"get",url:o,params:n,headers:i}).then((function(e){t.paises=e.data.paises,t.loadingPaises=!1})).catch((function(e){t.loadingPaises=!1,401===e.response.status&&(t.removeCredentials(),t.$router.push({name:"login"}))}))},CargarTipoIdentificaciones:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.loadingTipoIdentificaciones=!0;var o="http://35.203.165.142/api/catalogos/tipo_identificaciones",i={Authorization:"Bearer "+this.$store.state.token},n={q:e};u()({method:"get",url:o,params:n,headers:i}).then((function(e){t.tipo_identificaciones=e.data.tipo_identificaciones,t.loadingTipoIdentificaciones=!1})).catch((function(e){t.loadingTipoIdentificaciones=!1,401===e.response.status&&(t.removeCredentials(),t.$router.push({name:"login"}))}))}},watch:{centros:{handler:function(t){this.centros.length===this.centros.filter((function(t){return t.checked})).length?this.allCentros=!0:this.centros.length>this.centros.filter((function(t){return t.checked})).length&&(this.allCentros=!1)},deep:!0}},computed:{id_rol:function(){return Number(this.$store.state.user.rol)}}},h=m,g=(o("94aa"),o("2877")),v=Object(g["a"])(h,i,n,!1,null,null,null);e["default"]=v.exports}}]);